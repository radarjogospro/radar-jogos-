<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#06161a" />
  <title>Radar PRO</title>

  <style>
    :root{
      --bg0:#050f12;
      --bg1:#06161a;
      --glass: rgba(255,255,255,.05);
      --glass2: rgba(255,255,255,.028);
      --stroke: rgba(255,255,255,.10);
      --stroke2: rgba(255,255,255,.14);

      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);

      --cyan:#39d6e7;
      --green:#22c55e;
      --pink:#ff2d86;
      --danger:#ef4444;

      --shadow: 0 18px 55px rgba(0,0,0,.55);
      --r: 22px;
      --r2: 16px;

      --max: 760px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1100px 650px at 25% -10%, rgba(34,197,94,.10), transparent 60%),
        radial-gradient(900px 520px at 90% 10%, rgba(6,182,212,.10), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      overflow-x:hidden;
    }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 12px 14px 96px;
    }

    .surface{
      background: linear-gradient(145deg, var(--glass), var(--glass2));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }

    /* ================= TOP (fixo / N√ÉO m√≥vel) ================= */
    .top{
      position: sticky;
      top: 10px;
      z-index: 40;
      border-radius: var(--r);
      padding: 12px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }

    .brandLeft{
      display:flex; align-items:center; gap:10px; min-width:0;
    }
    .logoRD{
      width:46px; height:46px;
      border-radius: 18px;
      display:grid; place-items:center;
      font-weight: 1000;
      letter-spacing: .5px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
      flex: 0 0 auto;
    }
    .brandTxt{ min-width:0; }
    .brandTxt .title{
      font-weight: 1000;
      font-size: 18px;
      line-height: 1.1;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 200px;
    }
    .subline{
      margin-top: 3px;
      display:flex;
      align-items:center;
      gap:8px;
      color: var(--muted);
      font-weight: 900;
      font-size: 12px;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: var(--green);
      box-shadow: 0 0 0 6px rgba(34,197,94,.12);
    }

    .topActions{
      display:flex; align-items:center; gap:10px; flex: 0 0 auto;
    }

    .iconBtn{
      width:46px; height:46px;
      border-radius: 18px;
      display:grid; place-items:center;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.9);
      font-weight: 1000;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .iconBtn:active{ transform: scale(.98); }

    .cta{
      height:46px;
      padding: 0 18px;
      border-radius: 18px;
      border: 1px solid rgba(255,45,134,.35);
      background: linear-gradient(180deg, rgba(255,45,134,.35), rgba(255,45,134,.16));
      box-shadow: 0 14px 40px rgba(255,45,134,.08);
      color: rgba(255,255,255,.96);
      font-weight: 1000;
      letter-spacing:.5px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      white-space:nowrap;
    }
    .cta:active{ transform: scale(.98); }

    .ghostCta{
      height:46px;
      padding: 0 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.92);
      font-weight: 1000;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      white-space:nowrap;
    }
    .ghostCta:active{ transform: scale(.98); }

    /* ================= Sports strip ================= */
    .sportsStrip{
      margin-top: 12px;
      border-radius: var(--r);
      padding: 12px;
    }
    .sportsRow{
      display:flex;
      gap: 14px;
      overflow:auto;
      padding-bottom: 6px;
      -webkit-overflow-scrolling: touch;
    }
    .sportsRow::-webkit-scrollbar{ height: 6px; }
    .sportsRow::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.10); border-radius: 999px; }

    .sportBtn{
      min-width: 92px;
      padding: 10px 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:6px;
      font-weight: 1000;
      color: rgba(255,255,255,.90);
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .sportBtn .ico{
      width:42px; height:42px;
      border-radius: 18px;
      display:grid; place-items:center;
      background: rgba(0,0,0,.20);
      border: 1px solid rgba(255,255,255,.10);
      font-size: 20px;
    }
    .sportBtn small{ color: var(--muted); font-weight: 900; font-size: 12px; }
    .sportBtn.active{
      border-color: rgba(57,214,231,.35);
      background: linear-gradient(180deg, rgba(57,214,231,.16), rgba(57,214,231,.06));
    }

    /* ================= Banners (somente In√≠cio/Ao vivo) ================= */
    .miniPromo{
      margin-top: 12px;
      border-radius: var(--r);
      padding: 12px;
    }
    .promoRow{
      display:flex;
      gap: 10px;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
    }
    .promoRow::-webkit-scrollbar{ height: 6px; }
    .promoRow::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.10); border-radius: 999px; }

    .promoChip{
      min-width: 220px;
      padding: 12px 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      font-weight: 1000;
      white-space:nowrap;
    }
    .promoChip b{ font-size: 14px; }
    .pillNew{
      padding: 5px 10px;
      border-radius: 999px;
      background: rgba(255,45,134,.22);
      border: 1px solid rgba(255,45,134,.35);
      font-size: 12px;
      font-weight: 1000;
      color: rgba(255,255,255,.94);
    }

    .hero{
      margin-top: 12px;
      border-radius: var(--r);
      overflow:hidden;
      position:relative;
    }
    .heroTrack{
      display:flex;
      gap: 12px;
      overflow:auto;
      padding: 12px;
      -webkit-overflow-scrolling: touch;
    }
    .heroTrack::-webkit-scrollbar{ height: 6px; }
    .heroTrack::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.10); border-radius: 999px; }

    .heroCard{
      min-width: 320px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.10);
      background: radial-gradient(110% 120% at 20% 20%, rgba(57,214,231,.20), transparent 55%),
                  radial-gradient(120% 120% at 90% 20%, rgba(255,45,134,.16), transparent 55%),
                  rgba(255,255,255,.03);
      padding: 14px 14px;
      position:relative;
      overflow:hidden;
    }
    .heroCard .tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(239,68,68,.35);
      background: rgba(239,68,68,.12);
      font-weight: 1000;
      font-size: 12px;
      letter-spacing:.3px;
    }
    .heroCard .tag .ld{ width:10px; height:10px; border-radius:999px; background: var(--danger); box-shadow: 0 0 0 6px rgba(239,68,68,.12);}
    .heroCard .hTeams{
      margin-top: 10px;
      font-weight: 1100;
      font-size: 20px;
      line-height: 1.15;
    }
    .heroCard .hMeta{
      margin-top: 8px;
      color: rgba(255,255,255,.75);
      font-weight: 900;
      font-size: 13px;
      display:flex;
      justify-content:space-between;
      gap:10px;
    }
    .oddsRow{
      margin-top: 12px;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 0;
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .oddBox{
      padding: 10px 10px;
      border-right: 1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      font-weight: 1000;
      color: rgba(255,255,255,.92);
    }
    .oddBox:last-child{ border-right: 0; }
    .oddBox b{ color: rgba(57,214,231,.95); }
    .oddBox span{ opacity:.8; font-weight: 1000; }

    /* ================= Section titles ================= */
    .section{
      margin-top: 14px;
    }
    .section h3{
      margin: 0 0 10px;
      font-size: 22px;
      letter-spacing:.2px;
    }
    .sectionTitleRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .muted{ color: var(--muted); font-weight: 900; }

    /* ================= Popular chips ================= */
    .pop{
      border-radius: var(--r);
      padding: 12px;
    }
    .popRow{
      display:flex;
      gap: 10px;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
    }
    .popRow::-webkit-scrollbar{ height: 6px; }
    .popRow::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.10); border-radius: 999px; }

    .pchip{
      padding: 12px 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      display:flex;
      align-items:center;
      gap:10px;
      font-weight: 1000;
      white-space: nowrap;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .pchip .pcIco{
      width:26px; height:26px;
      border-radius: 12px;
      display:grid; place-items:center;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.10);
      font-size: 14px;
    }
    .pchip:active{ transform: scale(.99); }

    /* ================= Filters panel (somente Jogos) ================= */
    .filters{
      margin-top: 12px;
      border-radius: var(--r);
      padding: 12px;
    }
    .filterRow{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .search{
      flex: 1 1 auto;
      display:flex;
      padding: 11px 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .search input{
      width:100%;
      border:0; outline:none;
      background: transparent;
      color: rgba(255,255,255,.92);
      font-size: 14px;
      font-weight: 900;
    }
    .btn{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.92);
      padding: 11px 14px;
      border-radius: 18px;
      font-weight: 1000;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      white-space:nowrap;
    }
    .btn:active{ transform: scale(.98); }
    .btn.primary{
      border-color: rgba(34,197,94,.40);
      background: linear-gradient(180deg, rgba(34,197,94,.22), rgba(34,197,94,.10));
    }

    .chips{
      margin-top: 12px;
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
    }
    .chip{
      padding: 11px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      font-weight: 1000;
      font-size: 13px;
      display:flex;
      align-items:center;
      gap:10px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .chip .miniDot{
      width:10px; height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.22);
    }
    .chip.active{
      border-color: rgba(57,214,231,.35);
      background: linear-gradient(180deg, rgba(57,214,231,.16), rgba(57,214,231,.07));
    }
    .chip.active .miniDot{ background: var(--cyan); }
    .chip.active.green{
      border-color: rgba(34,197,94,.40);
      background: linear-gradient(180deg, rgba(34,197,94,.18), rgba(34,197,94,.08));
    }
    .chip.active.green .miniDot{ background: var(--green); }

    .meta{
      margin-top: 10px;
      color: rgba(255,255,255,.70);
      font-size: 13px;
      font-weight: 900;
      line-height: 1.35;
    }

    /* ================= League accordion (Jogos) ================= */
    .league{
      margin-top: 12px;
      border-radius: var(--r);
      overflow:hidden;
    }
    .leagueHead{
      padding: 12px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      background: rgba(255,255,255,.02);
    }
    .leagueHead .lhLeft{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .flag{
      width:34px; height:34px;
      border-radius: 14px;
      display:grid; place-items:center;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.10);
      font-size: 16px;
      flex: 0 0 auto;
    }
    .leagueName{
      font-weight: 1100;
      font-size: 16px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 520px;
    }
    .caret{
      width:42px; height:42px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      display:grid; place-items:center;
      font-weight: 1100;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .caret:active{ transform: scale(.98); }

    .leagueBody{
      display:none;
      padding: 0 12px 12px;
    }
    .league.open .leagueBody{ display:block; }

    .matchCard{
      margin-top: 10px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
      overflow:hidden;
    }
    .mcTop{
      padding: 12px 12px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
    }
    .teams{
      display:grid;
      gap: 8px;
      font-weight: 1100;
      font-size: 18px;
      line-height: 1.15;
    }
    .tRow{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width:0;
    }
    .ball{
      width:30px; height:30px;
      border-radius: 14px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.10);
      flex: 0 0 auto;
      font-size: 16px;
    }
    .tName{
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 420px;
    }

    .mcRight{
      text-align:right;
      min-width: 110px;
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap: 8px;
    }
    .liveTag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(239,68,68,.35);
      background: rgba(239,68,68,.12);
      font-weight: 1100;
      font-size: 12px;
      letter-spacing:.3px;
      white-space:nowrap;
    }
    .liveTag .ld{ width:10px; height:10px; border-radius:999px; background: var(--danger); box-shadow: 0 0 0 6px rgba(239,68,68,.12); }
    .timePill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: rgba(255,255,255,.86);
      font-weight: 1100;
      font-size: 12px;
      white-space:nowrap;
    }

    .mcMeta{
      padding: 0 12px 12px;
      color: rgba(255,255,255,.70);
      font-weight: 900;
      font-size: 13px;
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .oddsRow2{
      margin: 0 12px 12px;
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
    }
    .odd2{
      padding: 10px 10px;
      border-right: 1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      font-weight: 1000;
      color: rgba(255,255,255,.92);
    }
    .odd2:last-child{ border-right:0; }
    .odd2 b{ color: rgba(57,214,231,.95); }

    .actions{
      padding: 0 12px 12px;
      display:flex;
      gap: 10px;
    }
    .actions .btn{ flex: 1 1 0; text-align:center; }

    .empty{
      margin-top: 12px;
      padding: 16px;
      border-radius: var(--r);
      border: 1px dashed rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      color: rgba(255,255,255,.70);
      text-align:center;
      font-weight: 1000;
    }

    /* ================= Bottom nav ================= */
    .bottomNav{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 14px;
      width: min(var(--max), calc(100% - 28px));
      padding: 10px;
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.42);
      backdrop-filter: blur(12px);
      display:flex;
      gap: 10px;
      box-shadow: var(--shadow);
      z-index: 60;
    }
    .navBtn{
      flex: 1 1 0;
      padding: 11px 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.86);
      font-weight: 1100;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      white-space:nowrap;
    }
    .navBtn.active{
      border-color: rgba(57,214,231,.35);
      background: linear-gradient(180deg, rgba(57,214,231,.18), rgba(57,214,231,.08));
    }
    .navBtn:active{ transform: scale(.99); }

    /* ================= Modal (menu 3 pontinhos) ================= */
    .overlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.58);
      display:none;
      align-items:flex-end;
      justify-content:center;
      z-index: 80;
    }
    .overlay.show{ display:flex; }
    .modal{
      width: min(var(--max), calc(100% - 28px));
      margin-bottom: 14px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(6,22,26,.96);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .mHead{
      padding: 14px 14px 10px;
      display:flex; align-items:center; justify-content:space-between;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    .mHead b{ font-size: 15px; letter-spacing:.2px; }
    .mBody{ padding: 12px 14px 14px; display:flex; flex-direction:column; gap:10px; }
    .mItem{
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      font-weight: 1000;
      display:flex; align-items:center; justify-content:space-between;
      cursor:pointer;
      user-select:none;
    }
    .mItem small{ color: var(--muted); font-weight: 900; }

    @media (max-width: 420px){
      .brandTxt .title{ max-width: 150px; }
      .heroCard{ min-width: 300px; }
      .leagueName{ max-width: 240px; }
      .tName{ max-width: 230px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- TOP FIXO -->
    <div class="top surface">
      <div class="brandLeft">
        <div class="logoRD">RD</div>
        <div class="brandTxt">
          <div class="title">Radar PRO</div>
          <div class="subline">
            <span class="dot"></span><span>Online</span>
          </div>
        </div>
      </div>

      <div class="topActions">
        <button class="iconBtn" id="btnMenu" title="Menu">‚ãÆ</button>
        <button class="iconBtn" id="btnGift" title="Populares">üéÅ</button>
        <button class="cta" id="btnEntrar">ENTRAR</button>
      </div>
    </div>

    <!-- Sports Strip (layout igual) -->
    <div class="sportsStrip surface">
      <div class="sportsRow" id="sportsRow">
        <div class="sportBtn active" data-sport="all"><div class="ico">üì°</div><div>Tudo</div></div>
        <div class="sportBtn" data-sport="football"><div class="ico">‚öΩ</div><div>Futebol</div></div>
        <div class="sportBtn" data-sport="tennis"><div class="ico">üéæ</div><div>T√™nis</div></div>
        <div class="sportBtn" data-sport="basket"><div class="ico">üèÄ</div><div>Basquete</div></div>
        <div class="sportBtn" data-sport="volley"><div class="ico">üèê</div><div>V√¥lei</div></div>
      </div>
    </div>

    <!-- BANNERS (somente In√≠cio/Ao vivo) -->
    <div id="bannerArea">
      <div class="miniPromo surface">
        <div class="promoRow">
          <div class="promoChip"><b>Ganhe R$ 20 com nosso APP</b><span class="pillNew">NOVO</span></div>
          <div class="promoChip"><b>Radar PRO ‚Ä¢ tend√™ncias</b><span class="pillNew">PRO</span></div>
        </div>
      </div>

      <div class="hero surface">
        <div class="heroTrack" id="heroTrack">
          <!-- cards preenchidos via JS -->
        </div>
      </div>
    </div>

    <!-- HOME -->
    <div id="pageHome">
      <div class="section">
        <h3>Populares</h3>
        <div class="pop surface">
          <div class="popRow">
            <div class="pchip"><span class="pcIco">‚ö°</span> Odds Turbinadas</div>
            <div class="pchip"><span class="pcIco">üáßüá∑</span> Futebol do Brasil</div>
            <div class="pchip"><span class="pcIco">üèÄ</span> NBA</div>
            <div class="pchip"><span class="pcIco">üî•</span> Ligas principais</div>
            <div class="pchip"><span class="pcIco">üéæ</span> ATP/WTA</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="sectionTitleRow">
          <h3 style="margin:0">Jogos ao vivo</h3>
          <div class="muted" id="liveCountHome">‚Äî</div>
        </div>
        <div id="homeLivePreview"></div>
      </div>
    </div>

    <!-- LIVE -->
    <div id="pageLive" style="display:none;">
      <div class="section">
        <div class="sectionTitleRow">
          <h3 style="margin:0">Ao vivo</h3>
          <div class="muted" id="liveCountLive">‚Äî</div>
        </div>
        <div id="liveList"></div>
      </div>
    </div>

    <!-- GAMES (SEM BANNERS) -->
    <div id="pageGames" style="display:none;">
      <div class="filters surface">
        <div class="filterRow">
          <div class="search">
            <input id="q" type="text" placeholder="Buscar time, liga ou pa√≠s..." autocomplete="off" />
          </div>
          <button class="btn" id="clearBtn">Limpar</button>
        </div>

        <div class="filterRow" style="margin-top:10px;">
          <button class="btn primary" id="refreshBtn">Atualizar</button>
          <button class="btn" id="autoBtn">Auto: OFF</button>
          <button class="btn" id="infoBtn">Info</button>
        </div>

        <div class="chips">
          <div class="chip green active" id="chipUpcoming"><span class="miniDot"></span> Pr√≥ximos</div>
          <div class="chip" id="chipLive"><span class="miniDot"></span> Ao vivo</div>
          <div class="chip" id="chipBrazil"><span class="miniDot"></span> Brasil</div>
          <div class="chip" id="chipEurope"><span class="miniDot"></span> Europa</div>
          <div class="chip active" id="chipAll"><span class="miniDot"></span> Todos</div>
        </div>

        <div class="meta" id="meta">Carregando‚Ä¶</div>

        <div class="filterRow" style="margin-top:10px;">
          <div class="search" style="flex:1 1 auto; justify-content:space-between; align-items:center;">
            <div style="display:flex; align-items:center; gap:10px; font-weight:1000;">
              ‚áÖ <span id="sortLabel">Hor√°rio primeiro</span>
            </div>
            <button class="btn" id="sortBtn" style="padding:10px 12px; border-radius:16px;">‚ñæ</button>
          </div>
          <button class="iconBtn" id="gearBtn" title="Config (futuro)">‚öô</button>
          <button class="iconBtn" id="docBtn" title="Hist√≥rico (futuro)">üßæ</button>
        </div>
      </div>

      <div id="gamesList"></div>
    </div>

    <!-- PRO -->
    <div id="pagePro" style="display:none;">
      <div class="section">
        <h3>Radar PRO</h3>
        <div class="empty">
          √Årea PRO (assinatura) ‚Äî vamos ativar depois.<br>
          Por enquanto o layout est√° pronto.
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom nav -->
  <div class="bottomNav">
    <div class="navBtn active" id="navHome">üè† In√≠cio</div>
    <div class="navBtn" id="navLive">üì∂ Ao vivo</div>
    <div class="navBtn" id="navGames">üóìÔ∏è Jogos</div>
    <div class="navBtn" id="navPro">üíé PRO</div>
  </div>

  <!-- Modal menu -->
  <div class="overlay" id="overlay">
    <div class="modal">
      <div class="mHead">
        <b>Menu</b>
        <button class="btn" id="closeModal">Fechar</button>
      </div>
      <div class="mBody">
        <div class="mItem" id="goHome"><span>üè† In√≠cio</span><small>p√°gina principal</small></div>
        <div class="mItem" id="goLive"><span>üì∂ Ao vivo</span><small>lista ao vivo</small></div>
        <div class="mItem" id="goGames"><span>üóìÔ∏è Jogos</span><small>pr√≥ximos / filtros</small></div>
        <div class="mItem" id="goPro"><span>üíé PRO</span><small>assinatura (futuro)</small></div>
      </div>
    </div>
  </div>

  <script>
    /* ================= CONFIG ================= */
    const TZ = "America/Sao_Paulo";
    const LS_KEY = "rjpro_state_v250";
    const CACHE_KEY = "rjpro_cache_games_v250";

    const state = {
      page: "home",        // home | live | games | pro
      sport: "all",        // all | football | tennis | basket | volley
      mode: "upcoming",    // upcoming | live (somente em games)
      region: "all",       // all | brazil | europe
      q: "",
      autoOn: false,
      sort: "time"         // time | popular
    };

    let data = null;
    let allGames = [];
    let autoTimer = null;

    const $ = (id) => document.getElementById(id);
    const clamp = (n,a,b)=>Math.max(a,Math.min(b,n));

    function saveState(){ try{ localStorage.setItem(LS_KEY, JSON.stringify(state)); }catch(e){} }
    function loadState(){ try{ const raw=localStorage.getItem(LS_KEY); if(raw) Object.assign(state, JSON.parse(raw)); }catch(e){} }

    function cacheSave(){
      try{
        const payload = { updatedAt: data?.updatedAt || null, source: data?.source || null, games: allGames };
        localStorage.setItem(CACHE_KEY, JSON.stringify(payload));
      }catch(e){}
    }
    function cacheLoad(){
      try{
        const raw = localStorage.getItem(CACHE_KEY);
        if(!raw) return null;
        const obj = JSON.parse(raw);
        if(!obj || !Array.isArray(obj.games)) return null;
        return obj;
      }catch(e){ return null; }
    }

    function fmtBrtDate(d){
      return new Intl.DateTimeFormat("pt-BR", { timeZone: TZ, day:"2-digit", month:"2-digit", year:"numeric" }).format(d);
    }
    function fmtBrtTime(d){
      return new Intl.DateTimeFormat("pt-BR", { timeZone: TZ, hour:"2-digit", minute:"2-digit" }).format(d);
    }
    function brtDayKey(d){
      const parts = new Intl.DateTimeFormat("en-CA", { timeZone: TZ, year:"numeric", month:"2-digit", day:"2-digit" }).formatToParts(d);
      const y = parts.find(p=>p.type==="year").value;
      const m = parts.find(p=>p.type==="month").value;
      const da = parts.find(p=>p.type==="day").value;
      return `${y}-${m}-${da}`;
    }

    function escapeHtml(s){
      return String(s ?? "").replace(/[&<>"']/g, m => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[m]));
    }

    function gameId(g){
      if(g.id) return String(g.id);
      return `${g.home||""}__${g.away||""}__${g.league||""}__${g.date||""}__${g.time||""}`;
    }
    function getKickoffMs(g){
      if(typeof g.kickoffTs === "number") return g.kickoffTs;
      return null;
    }
    function isFinished(g){
      const st = (g.status||"").toUpperCase();
      return st === "FT" || st === "AET" || st === "PEN";
    }

    // failsafe live (igual sua ideia)
    function isLikelyStaleLive(g){
      const st = (g.status||"").toUpperCase();
      const k = getKickoffMs(g);
      if(!k) return false;

      const now = Date.now();
      const ageMin = (now - k) / 60000;
      const el = (typeof g.elapsed === "number") ? g.elapsed : null;

      const liveSet = ["1H","2H","HT","ET","BT","P","LIVE","IN_PLAY"];
      if(!liveSet.includes(st)) return false;

      if(el !== null && el >= 90 && ageMin >= 120) return true;
      if(st === "ET" && ageMin >= 210) return true;
      if(el === null && ageMin >= 165) return true;
      return false;
    }
    function isLiveGame(g){
      if(isFinished(g)) return false;
      if(isLikelyStaleLive(g)) return false;
      if(g.isLive === true) return true;

      const st = (g.status||"").toUpperCase();
      if(["1H","2H","HT","ET","P","LIVE","IN_PLAY","BT"].includes(st)) return true;
      if(typeof g.elapsed === "number" && st !== "FT") return true;
      return false;
    }

    function regionMatch(g){
      const c = (g.country||"").toLowerCase();
      if(state.region==="all") return true;
      if(state.region==="brazil") return c.includes("brazil") || c.includes("brasil");
      if(state.region==="europe"){
        const eu = ["england","scotland","spain","france","italy","germany","portugal","netherlands","belgium","switzerland","austria","sweden","norway","denmark","finland","poland","czech","slovakia","hungary","romania","bulgaria","greece","turkey","croatia","serbia","slovenia","ukraine"];
        return eu.some(x => c.includes(x));
      }
      return true;
    }
    function qMatch(g){
      const q = (state.q||"").trim().toLowerCase();
      if(!q) return true;
      const hay = `${g.home||""} ${g.away||""} ${g.league||""} ${g.country||""}`.toLowerCase();
      return hay.includes(q);
    }

    function flagEmoji(country){
      const c = (country||"").toLowerCase();
      if(c.includes("brazil")||c.includes("brasil")) return "üáßüá∑";
      if(c.includes("argentina")) return "üá¶üá∑";
      if(c.includes("spain")||c.includes("espanha")) return "üá™üá∏";
      if(c.includes("italy")||c.includes("it√°lia")) return "üáÆüáπ";
      if(c.includes("germany")||c.includes("alemanha")) return "üá©üá™";
      if(c.includes("france")||c.includes("fran√ßa")) return "üá´üá∑";
      if(c.includes("england")) return "üè¥";
      if(c.includes("portugal")) return "üáµüáπ";
      if(c.includes("netherlands")||c.includes("holanda")) return "üá≥üá±";
      if(c.includes("belgium")||c.includes("b√©lgica")) return "üáßüá™";
      if(c.includes("usa")||c.includes("united states")) return "üá∫üá∏";
      return "üåç";
    }

    function odds3(g){
      // tenta achar odds no JSON se existir (voc√™ pode adaptar depois)
      const o1 = g.odds1 ?? g.odd1 ?? g.homeOdd ?? null;
      const ox = g.oddsX ?? g.oddX ?? g.drawOdd ?? null;
      const o2 = g.odds2 ?? g.odd2 ?? g.awayOdd ?? null;
      return { o1, ox, o2 };
    }

    async function loadJogosJson(force=false){
      const bust = force ? `?t=${Date.now()}` : "";
      const res = await fetch("jogos.json"+bust, { cache: "no-store" });
      if(!res.ok) throw new Error("Falha ao carregar jogos.json");
      const j = await res.json();
      data = j;
      allGames = Array.isArray(j.games) ? j.games : [];

      // Se veio vazio, tenta cache
      if(allGames.length === 0){
        const cached = cacheLoad();
        if(cached && Array.isArray(cached.games) && cached.games.length){
          allGames = cached.games;
        }
      }else{
        cacheSave();
      }
    }

    function updateMeta(){
      const upd = data?.updatedAt || "‚Äî";
      const src = data?.source || "‚Äî";

      const live = allGames.filter(isLiveGame).length;
      const todayKey = brtDayKey(new Date());
      const today = allGames.filter(g => g.date === todayKey).length;

      $("meta").innerHTML =
        `Atualizado: <b>${escapeHtml(upd)}</b> ‚Ä¢ Fonte: <b>${escapeHtml(src)}</b><br>`+
        `Jogos: <b>${allGames.length}</b> ‚Ä¢ Hoje: <b>${today}</b> ‚Ä¢ Ao vivo: <b>${live}</b>`;
    }

    function setPage(p){
      state.page = p;
      saveState();

      $("pageHome").style.display = (p==="home") ? "" : "none";
      $("pageLive").style.display = (p==="live") ? "" : "none";
      $("pageGames").style.display = (p==="games") ? "" : "none";
      $("pagePro").style.display = (p==="pro") ? "" : "none";

      // banners s√≥ em home/live
      $("bannerArea").style.display = (p==="games" || p==="pro") ? "none" : "";

      // nav active
      $("navHome").classList.toggle("active", p==="home");
      $("navLive").classList.toggle("active", p==="live");
      $("navGames").classList.toggle("active", p==="games");
      $("navPro").classList.toggle("active", p==="pro");

      // se entrar em games, renderiza filtros/lista
      renderAll();
      if(state.autoOn) startAuto();
    }

    function setSport(s){
      state.sport = s;
      saveState();
      document.querySelectorAll(".sportBtn").forEach(x=>{
        x.classList.toggle("active", x.getAttribute("data-sport")===s);
      });
      renderAll();
    }

    function setModeGames(m){
      state.mode = m;
      saveState();
      $("chipUpcoming").classList.toggle("active", m==="upcoming");
      $("chipUpcoming").classList.toggle("green", true);
      $("chipLive").classList.toggle("active", m==="live");
      renderAll();
      if(state.autoOn) startAuto();
    }

    function setRegion(r){
      state.region = r;
      saveState();
      $("chipBrazil").classList.toggle("active", r==="brazil");
      $("chipEurope").classList.toggle("active", r==="europe");
      $("chipAll").classList.toggle("active", r==="all");
      renderAll();
    }

    function renderHero(){
      // hero mostra 2-3 cards (usa jogos ao vivo se tiver)
      const root = $("heroTrack");
      root.innerHTML = "";
      const lives = allGames.filter(isLiveGame).slice(0,3);

      const fallback = [
        { tag:"AO VIVO", a:"Liverpool", b:"Brighton", t:"00:20", o1:"1.50", ox:"4.75", o2:"5.70" },
        { tag:"AO VIVO", a:"Inter", b:"Juventus", t:"89:43", o1:"5.45", ox:"1.23", o2:"15.50" }
      ];

      const list = lives.length ? lives.map(g=>{
        const {o1,ox,o2} = odds3(g);
        const scoreHome = (typeof g.scoreHome==="number") ? g.scoreHome : null;
        const scoreAway = (typeof g.scoreAway==="number") ? g.scoreAway : null;
        const score = (scoreHome===null||scoreAway===null) ? "0‚Äì0" : `${scoreHome}‚Äì${scoreAway}`;
        const el = (typeof g.elapsed==="number") ? `${g.elapsed}'` : (g.status||"");
        return {
          tag: "AO VIVO",
          a: g.home || "‚Äî",
          b: g.away || "‚Äî",
          t: `${score} ‚Ä¢ ${el || "‚Äî"}`,
          o1: o1 ?? "‚Äî",
          ox: ox ?? "‚Äî",
          o2: o2 ?? "‚Äî"
        };
      }) : fallback;

      for(const x of list){
        const card = document.createElement("div");
        card.className = "heroCard";
        card.innerHTML = `
          <div class="tag"><span class="ld"></span>${escapeHtml(x.tag)}</div>
          <div class="hTeams">${escapeHtml(x.a)}<br>${escapeHtml(x.b)}</div>
          <div class="hMeta"><span>${escapeHtml(x.t)}</span><span>‚öΩ</span></div>
          <div class="oddsRow">
            <div class="oddBox"><span>1</span><b>${escapeHtml(String(x.o1))}</b></div>
            <div class="oddBox"><span>X</span><b>${escapeHtml(String(x.ox))}</b></div>
            <div class="oddBox"><span>2</span><b>${escapeHtml(String(x.o2))}</b></div>
          </div>
        `;
        root.appendChild(card);
      }
    }

    function matchSport(g){
      // por enquanto s√≥ futebol real; os outros ficam como filtro visual
      if(state.sport==="all") return true;
      if(state.sport==="football") return true;
      return false;
    }

    function homeLivePreview(){
      const root = $("homeLivePreview");
      const list = allGames.filter(g => matchSport(g) && isLiveGame(g)).slice(0,6);
      $("liveCountHome").textContent = list.length ? `${list.length}` : "0";
      if(!list.length){
        root.innerHTML = `<div class="empty">Sem jogos ao vivo agora.</div>`;
        return;
      }
      root.innerHTML = "";
      for(const g of list){
        root.appendChild(renderMatchCard(g, { showOdds:true }));
      }
    }

    function renderLivePage(){
      const root = $("liveList");
      const list = allGames.filter(g => matchSport(g) && isLiveGame(g)).slice(0,200);
      $("liveCountLive").textContent = list.length ? `${list.length}` : "0";

      if(!list.length){
        root.innerHTML = `<div class="empty">Nada ao vivo agora.</div>`;
        return;
      }
      root.innerHTML = "";
      // agrupado por liga
      const groups = groupByLeague(list);
      for(const [k,arr] of groups){
        root.appendChild(renderLeagueBlock(k, arr, true));
      }
    }

    function filterUpcoming(){
      const now = Date.now();
      const max = now + 24*3600*1000;
      return allGames.filter(g=>{
        if(!matchSport(g)) return false;
        if(!regionMatch(g) || !qMatch(g)) return false;
        if(isLiveGame(g)) return false;
        const kk = getKickoffMs(g);
        if(!kk) return false;
        if(isFinished(g)) return false;
        return kk>=now && kk<=max;
      });
    }

    function filterGamesMode(){
      if(state.mode==="live"){
        return allGames.filter(g=>{
          if(!matchSport(g)) return false;
          if(!regionMatch(g) || !qMatch(g)) return false;
          return isLiveGame(g);
        });
      }
      return filterUpcoming();
    }

    function groupByLeague(list){
      // key: country + league
      const map = new Map();
      for(const g of list){
        const key = `${g.country||"World"} ‚Ä¢ ${g.league||"‚Äî"}`;
        if(!map.has(key)) map.set(key, []);
        map.get(key).push(g);
      }
      // sort groups
      const entries = Array.from(map.entries());
      entries.sort((a,b)=>{
        if(state.sort==="popular"){
          // popular: mais jogos por liga
          return b[1].length - a[1].length;
        }
        // time: menor kickoff dentro da liga
        const ta = minKickoff(a[1]);
        const tb = minKickoff(b[1]);
        return ta - tb;
      });

      // sort inside each group by time
      for(const e of entries){
        e[1].sort((x,y)=>(getKickoffMs(x)||0)-(getKickoffMs(y)||0));
      }
      return entries;
    }

    function minKickoff(arr){
      let m = Infinity;
      for(const g of arr){
        const k = getKickoffMs(g);
        if(typeof k==="number" && k<m) m=k;
      }
      return isFinite(m) ? m : 0;
    }

    function renderLeagueBlock(key, arr, openDefault=false){
      const el = document.createElement("div");
      el.className = "league surface" + (openDefault ? " open" : "");
      const country = (arr[0]?.country || "World");
      const flag = flagEmoji(country);

      el.innerHTML = `
        <div class="leagueHead">
          <div class="lhLeft">
            <div class="flag">${flag}</div>
            <div class="leagueName">${escapeHtml(key)}</div>
          </div>
          <div class="caret" data-caret>‚ñ¥</div>
        </div>
        <div class="leagueBody"></div>
      `;

      const body = el.querySelector(".leagueBody");
      for(const g of arr){
        body.appendChild(renderMatchCard(g, { showOdds:true }));
      }

      const caret = el.querySelector("[data-caret]");
      caret.onclick = () => {
        el.classList.toggle("open");
        caret.textContent = el.classList.contains("open") ? "‚ñ¥" : "‚ñæ";
      };

      // caret initial
      caret.textContent = el.classList.contains("open") ? "‚ñ¥" : "‚ñæ";
      return el;
    }

    function renderMatchCard(g, opt={showOdds:true}){
      const live = isLiveGame(g);
      const k = getKickoffMs(g);
      const tStr = k ? fmtBrtTime(new Date(k)) : (g.time || "‚Äî");
      const dStr = g.date ? fmtBrtDate(new Date(`${g.date}T12:00:00-03:00`)) : "‚Äî";
      const key = `${g.country||"World"} ‚Ä¢ ${g.league||"‚Äî"} ‚Ä¢ ${dStr}`;

      const sh = (typeof g.scoreHome==="number") ? g.scoreHome : null;
      const sa = (typeof g.scoreAway==="number") ? g.scoreAway : null;
      const score = (sh===null || sa===null) ? null : `${sh}‚Äì${sa}`;
      const mins = (typeof g.elapsed==="number") ? `${g.elapsed}'` : (g.status || "‚Äî");
      const rightTime = live ? (score ? `${score} ‚Ä¢ ${mins}` : mins) : tStr;

      const {o1,ox,o2} = odds3(g);

      const card = document.createElement("div");
      card.className = "matchCard";
      card.innerHTML = `
        <div class="mcTop">
          <div class="teams">
            <div class="tRow"><div class="ball">‚öΩ</div><div class="tName">${escapeHtml(g.home||"‚Äî")}</div></div>
            <div class="tRow"><div class="ball">‚öΩ</div><div class="tName">${escapeHtml(g.away||"‚Äî")}</div></div>
          </div>
          <div class="mcRight">
            ${live ? `<div class="liveTag"><span class="ld"></span>AO VIVO</div>` : ``}
            <div class="timePill">${escapeHtml(rightTime)}</div>
          </div>
        </div>

        <div class="mcMeta">${escapeHtml(key)}</div>

        ${opt.showOdds ? `
          <div class="oddsRow2">
            <div class="odd2"><span>1</span><b>${escapeHtml(String(o1 ?? "‚Äî"))}</b></div>
            <div class="odd2"><span>X</span><b>${escapeHtml(String(ox ?? "‚Äî"))}</b></div>
            <div class="odd2"><span>2</span><b>${escapeHtml(String(o2 ?? "‚Äî"))}</b></div>
          </div>
        ` : ``}

        <div class="actions">
          <button class="btn" data-act="details">Detalhes</button>
          <button class="btn" data-act="fav">‚òÜ Favoritar</button>
        </div>
      `;

      card.querySelector('[data-act="details"]').onclick = () => {
        alert(`Detalhes (futuro)\n\n${g.home||"‚Äî"} x ${g.away||"‚Äî"}\nLiga: ${g.league||"‚Äî"}\nPa√≠s: ${g.country||"‚Äî"}`);
      };
      card.querySelector('[data-act="fav"]').onclick = () => {
        alert("Favoritos (futuro): vamos plugar na pr√≥xima etapa.");
      };

      return card;
    }

    function renderGamesPage(){
      updateMeta();

      const root = $("gamesList");
      const list = filterGamesMode();

      // contagens
      if(!allGames.length){
        root.innerHTML = `<div class="empty">Sem dados agora. (Se a API estourar, pode ficar vazio mesmo.)</div>`;
        return;
      }

      if(!list.length){
        root.innerHTML = `<div class="empty">Sem jogos com esses filtros.</div>`;
        return;
      }

      root.innerHTML = "";
      const groups = groupByLeague(list);
      for(const [k,arr] of groups){
        root.appendChild(renderLeagueBlock(k, arr, false));
      }
    }

    function renderAll(){
      renderHero();

      if(state.page==="home"){
        homeLivePreview();
      }
      if(state.page==="live"){
        renderLivePage();
      }
      if(state.page==="games"){
        renderGamesPage();
      }
    }

    function startAuto(){
      stopAuto();
      const interval = (state.page==="live" || state.mode==="live") ? 30_000 : 60_000;
      autoTimer = setInterval(async ()=>{
        try{
          await loadJogosJson(true);
          renderAll();
        }catch(e){}
      }, interval);
    }
    function stopAuto(){
      if(autoTimer) clearInterval(autoTimer);
      autoTimer = null;
    }

    function wire(){
      // sport btns
      document.querySelectorAll(".sportBtn").forEach(btn=>{
        btn.onclick = () => setSport(btn.getAttribute("data-sport"));
      });

      // nav
      $("navHome").onclick = ()=>setPage("home");
      $("navLive").onclick = ()=>setPage("live");
      $("navGames").onclick = ()=>setPage("games");
      $("navPro").onclick = ()=>setPage("pro");

      // top buttons
      $("btnEntrar").onclick = ()=>alert("Entrar / Cadastro (futuro).");
      $("btnGift").onclick = ()=>alert("Populares (futuro): atalhos inteligentes.");
      $("btnMenu").onclick = ()=>$("overlay").classList.add("show");

      // modal
      $("closeModal").onclick = ()=>$("overlay").classList.remove("show");
      $("overlay").onclick = (e)=>{ if(e.target===$("overlay")) $("overlay").classList.remove("show"); };
      $("goHome").onclick = ()=>{ $("overlay").classList.remove("show"); setPage("home"); };
      $("goLive").onclick = ()=>{ $("overlay").classList.remove("show"); setPage("live"); };
      $("goGames").onclick = ()=>{ $("overlay").classList.remove("show"); setPage("games"); };
      $("goPro").onclick  = ()=>{ $("overlay").classList.remove("show"); setPage("pro"); };

      // games filters
      $("chipUpcoming").onclick = ()=>setModeGames("upcoming");
      $("chipLive").onclick = ()=>setModeGames("live");
      $("chipBrazil").onclick = ()=>setRegion("brazil");
      $("chipEurope").onclick = ()=>setRegion("europe");
      $("chipAll").onclick = ()=>setRegion("all");

      $("q").addEventListener("input", ()=>{
        state.q = $("q").value;
        saveState();
        renderGamesPage();
      });
      $("clearBtn").onclick = ()=>{
        state.q = "";
        $("q").value = "";
        saveState();
        renderGamesPage();
      };

      $("refreshBtn").onclick = async ()=>{
        $("refreshBtn").textContent = "Atualizando‚Ä¶";
        try{
          await loadJogosJson(true);
          renderAll();
        }catch(e){
          alert("Erro ao atualizar dados.");
        }finally{
          $("refreshBtn").textContent = "Atualizar";
        }
      };

      $("autoBtn").onclick = ()=>{
        state.autoOn = !state.autoOn;
        saveState();
        $("autoBtn").textContent = `Auto: ${state.autoOn ? "ON":"OFF"}`;
        if(state.autoOn) startAuto(); else stopAuto();
      };

      $("infoBtn").onclick = ()=>{
        const upd = data?.updatedAt || "‚Äî";
        const src = data?.source || "‚Äî";
        alert(`Radar PRO v2.5.0\nFonte: ${src}\nAtualizado: ${upd}\n\nObs: Se a API estourar, o JSON pode vir vazio.\nO app tenta usar cache local quando poss√≠vel.`);
      };

      // sort
      $("sortBtn").onclick = ()=>{
        state.sort = (state.sort==="time") ? "popular" : "time";
        $("sortLabel").textContent = (state.sort==="time") ? "Hor√°rio primeiro" : "Popular primeiro";
        saveState();
        renderGamesPage();
      };

      // future buttons
      $("gearBtn").onclick = ()=>alert("Configura√ß√µes: vamos usar mais pra frente.");
      $("docBtn").onclick = ()=>alert("Hist√≥rico: vamos ativar depois.");
    }

    (async function init(){
      loadState();

      // defaults seguros
      if(!state.page) state.page = "home";
      if(!state.sport) state.sport = "all";
      if(!state.mode) state.mode = "upcoming";
      if(!state.region) state.region = "all";
      if(!state.sort) state.sort = "time";

      // apply UI initial
      document.querySelectorAll(".sportBtn").forEach(x=>{
        x.classList.toggle("active", x.getAttribute("data-sport")===state.sport);
      });

      $("chipUpcoming").classList.toggle("active", state.mode==="upcoming");
      $("chipUpcoming").classList.toggle("green", true);
      $("chipLive").classList.toggle("active", state.mode==="live");

      $("chipBrazil").classList.toggle("active", state.region==="brazil");
      $("chipEurope").classList.toggle("active", state.region==="europe");
      $("chipAll").classList.toggle("active", state.region==="all");

      $("autoBtn").textContent = `Auto: ${state.autoOn ? "ON":"OFF"}`;
      $("sortLabel").textContent = (state.sort==="time") ? "Hor√°rio primeiro" : "Popular primeiro";
      $("q").value = state.q || "";

      wire();

      try{ await loadJogosJson(false); }catch(e){
        // tenta cache se fetch falhar
        const cached = cacheLoad();
        if(cached){
          data = cached;
          allGames = cached.games || [];
        }
      }

      renderAll();
      setPage(state.page);

      if(state.autoOn) startAuto();
    })();
  </script>
</body>
</html>
